# Изменения, доработки и пожелания

## Баги

- Включён `middleware.Recoverer`
- Исправлена опечатка в `createUser`: вместо `Email` было использовано поле
  `DisplayName`
- При обработке нескольких запросов могла возникнуть data race. Исправлено использованием `sync.RWMutex`

## Изменения в формате запросов и ответов

- При отсутствии пользователя возвращается ошибка 404.
- При внутренней ошибке сервера возвращается ошибка 500.

## Рефакторинг

- Исходный код исполняемого файла перенесён в `cmd`
- Модель `User` вынесена в `internal/model`
- Операции с JSON-хранилищем вынесены в `internal/store`
- Обработка HTTP запросов перенесена в `internal/handler`
- Обработка ошибок частично перемещена из handler-ов в middleware

## В перспективе

- Избегать излишнего повторения кода (например, открытие и сохранение файлов в
  оригинальном коде)
- Хранение важных данных в JSON-файлах — исключительно плохая идея, лучше
  использовать нормальную базу данных
- Покрыть код тестами
